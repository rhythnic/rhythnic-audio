function RhythnicAudio(e,t){var n=this;n.audio=document.createElement("audio");n.bTimeSlide=false;n.options=t||{};n.tracks=[];n.titles=[];n.current=0;n.container=e;n.controls=n.container.querySelector(".controls");n.playlist=n.container.querySelector(".playlist");n.play=n.controls.querySelector(".play");n.seek=n.controls.querySelector(".seek");n.duration=n.controls.querySelector(".duration");n.time=n.controls.querySelector(".time");n.playlistView=n.container.querySelector(".toggle-playlist-view")}if(typeof Object.create!=="function"){Object.create=function(e){function t(){}t.prototype=e;return new t}}RhythnicAudio.prototype.init=function(){var e=this;e.audioTest();e.controls.style.display="block";e.overrideOptions(e.defaultOptions,e.options);e.getTracksAndTitles(e.playlist);e.removeElementFocus();e.bindEvents();e.audioSetup();if(e.tracks.length<=1)e.playlistView.style.display="none";else{if(e.options.hidePlaylist){e.options.hidePlaylist=false;e.togglePlaylistView()}if(e.options.lockPlaylist)e.playlistView.style.display="none"}if(e.options.autoplay)e.togglePlay(e.audio.paused)};RhythnicAudio.prototype.bindEvents=function(){var e=this;e.controls.addEventListener("click",function(t){e.onClickControls(t)});e.container.addEventListener("click",function(t){e.onClickContainer(t)});e.container.addEventListener("keydown",function(t){e.onKeydownContainer(t)});e.audio.addEventListener("durationchange",function(t){e.onDurationchange()});e.audio.addEventListener("timeupdate",function(t){e.onTimeupdate()});e.audio.addEventListener("ended",function(t){e.onEnded()});e.seek.addEventListener("mousedown",function(t){e.bTimeSlide=true});e.seek.addEventListener("touchstart",function(t){e.bTimeSlide=true});e.seek.addEventListener("change",function(t){e.time.innerHTML=e.formatTime(e.seek.value)});e.seek.addEventListener("mouseup",function(t){e.onPointerdownSeek()});e.seek.addEventListener("touchend",function(t){e.onPointerdownSeek()})};RhythnicAudio.prototype.onClickControls=function(e){switch(e.target){case this.play:this.togglePlay(this.audio.paused);break;case this.playlistView:this.togglePlaylistView();break}};RhythnicAudio.prototype.onClickContainer=function(e){if(e.target.nodeName=="A"){e.preventDefault();if(e.target.parentElement.className.indexOf("selected")==-1)this.playTrack(this.titles.indexOf(e.target));else this.togglePlay(this.audio.paused)}};RhythnicAudio.prototype.onKeydownContainer=function(e){switch(e.keyCode){case 32:e.preventDefault();this.togglePlay(this.audio.paused);break;case 37:e.preventDefault();this.audio.currentTime-=2;break;case 39:e.preventDefault();this.audio.currentTime+=2;break;case 38:e.preventDefault();this.playTrack(this.current-1);break;case 40:e.preventDefault();this.playTrack(this.current+1);break}};RhythnicAudio.prototype.onDurationchange=function(){if(this.audio.duration!=Number.POSITIVE_INFINITY&&this.audio.duration!=Number.NEGATIVE_INFINITY&&!isNaN(this.audio.duration)&&this.audio.duration!==0){this.seek.max=this.audio.duration;this.duration.innerHTML="/"+this.formatTime(this.audio.duration)}};RhythnicAudio.prototype.onTimeupdate=function(){if(this.bTimeSlide)return;this.seek.value=this.audio.currentTime;this.time.innerHTML=this.formatTime(this.audio.currentTime)};RhythnicAudio.prototype.onEnded=function(){if(this.tracks.length>1)this.playTrack(this.current+1);else this.togglePlay(false)};RhythnicAudio.prototype.onPointerdownSeek=function(){this.audio.currentTime=this.seek.value;this.bTimeSlide=false};RhythnicAudio.prototype.playTrack=function(e){this.titles[this.current].parentElement.className=this.titles[this.current].parentElement.className.replace(" selected","");this.current=e<0?this.tracks.length-1:e%this.tracks.length;this.titles[this.current].parentElement.className+=" selected";this.audio.src=this.tracks[this.current];this.togglePlay(this.audio.paused)};RhythnicAudio.prototype.audioSetup=function(){if(this.audio.canPlayType("audio/"+this.options.mime)){this.audio.type="audio/"+this.options.mime}else{var e=false;for(var t in this.options.tracks){if(this.audio.canPlayType("audio/"+t)){this.audio.type="audio/"+t;this.tracks=this.options.tracks[t];e=true}}if(!e)throw new Error("Your browser doesn't support any of the provided audio file types.")}this.audio.src=this.tracks[this.current];this.titles[this.current].parentElement.className+=" selected"};RhythnicAudio.prototype.togglePlay=function(e){if(e){this.audio.play();this.play.className=this.play.className.replace(this.options.playIcon,this.options.pauseIcon)}else{this.audio.pause();this.play.className=this.play.className.replace(this.options.pauseIcon,this.options.playIcon)}};RhythnicAudio.prototype.getTracksAndTitles=function(e){var t=this;t.titles=Array.prototype.slice.call(e.getElementsByTagName("A"));t.titles.forEach(function(e){t.tracks.push(e.href)})};RhythnicAudio.prototype.togglePlaylistView=function(){this.toggleView(this.playlist,"plHide");this.options.hidePlaylist=!this.options.hidePlaylist};RhythnicAudio.prototype.toggleView=function(e,t){var n=new RegExp("(?:^|\\s)"+t+"(?!\\S)","g");if(n.test(e.className))e.className=e.className.replace(n,"");else e.className+=" "+t};RhythnicAudio.prototype.formatTime=function(e){var t=Math.floor(e%60);return Math.floor(e/60)+":"+(t<10?"0"+t:t)};RhythnicAudio.prototype.removeElementFocus=function(){this.titles.forEach(function(e){e.setAttribute("tabindex","-1");e.style.outline="none"})};RhythnicAudio.prototype.audioTest=function(){if(!this.audio.canPlayType)throw new Error("Your browser doesn't support the audio tag.\nPlaylist will be a list of audio links.")};RhythnicAudio.prototype.overrideOptions=function(e,t){for(var n in e){if(!(n in t))t[n]=e[n]}};RhythnicAudio.prototype.defaultOptions={mime:"mp4",autoplay:false,hidePlaylist:false,lockPlaylist:false,playIcon:"fa-play",pauseIcon:"fa-pause",tracks:{}};